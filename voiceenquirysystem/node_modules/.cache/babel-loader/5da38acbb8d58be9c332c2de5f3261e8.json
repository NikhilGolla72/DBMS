{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\golla\\\\OneDrive\\\\Desktop\\\\bhan\\\\Voice-based-Transport-Enquiry-System\\\\voiceenquirysystem\\\\src\\\\Components\\\\MainComponents\\\\Card\\\\Card.js\";\nimport React, { Component } from 'react';\nimport './Card.css';\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n    this.handleBooking = event => {\n      const selectedBusIndex = event.target.name;\n      console.log('Selected bus index:', selectedBusIndex);\n      this.setState({\n        bookedbus: selectedBusIndex\n      }, () => {\n        console.log('Selected bus:', this.state.Buses[this.state.bookedbus]);\n\n        // Set the selected bus in the parent state and navigate to the next route\n        this.props.SetBus(this.state.Buses[this.state.bookedbus]);\n        this.props.onRouteChange('test'); // Navigate to the next page (test route)\n      });\n    };\n    this.LoadBuses = () => {\n      if (this.state.Buses.length === 0) {\n        console.log('No buses available to display.');\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, \"No buses found\");\n      }\n      return this.state.Buses.map((bus, index) => React.createElement(\"div\", {\n        key: index,\n        className: \"bg-light-yellow br3 pa3 ma2 br2\",\n        style: {\n          width: \"550px\",\n          margin: \"0 auto\",\n          marginBottom: \"20px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"clearfix row-one\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column-two p-right-10 w-30 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"travels lh-24 f-bold d-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, bus.AgencyName), React.createElement(\"div\", {\n        className: \"bus-type f-15 m-top-16 l-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, bus.AC === 0 ? \"Non-AC\" : \"AC\"), React.createElement(\"img\", {\n        src: \"https://robohash.org/\".concat(index, \"?200x200\"),\n        alt: \"bus\",\n        style: {\n          width: \"50px\",\n          height: \"50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"column-three p-right-10 w-10 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dp-time f-15 d-color f-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, bus.StartTime)), React.createElement(\"div\", {\n        className: \"column-four p-right-10 w-20 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dur l-color lh-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, bus.TravelTime, \" hrs.\"), React.createElement(\"div\", {\n        className: \"bus-type f-15 m-top-16 d-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Travel Time\")), React.createElement(\"div\", {\n        className: \"column-eight w-15 fl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"seat-left m-top-16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, bus.TotalSeats - bus.ReservedSeats, \" \", React.createElement(\"span\", {\n        className: \"l-color\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \" Seats available\")))))));\n    };\n    this.state = {\n      Buses: [],\n      // Array to store the buses\n      bookedbus: -1 // Track the selected bus for booking\n    };\n  }\n  componentDidMount() {\n    if (this.props.sbus === true) {\n      const buses = [];\n      const routeIds = this.props.routeids;\n      if (routeIds.length === 0) {\n        console.log(\"No route IDs provided\");\n        return;\n      }\n\n      // Fetch buses for each RouteId\n      Promise.all(routeIds.map(id => fetch(\"http://localhost:3001/fetchBuses/\".concat(id)).then(res => res.json()) // No need for JSON.parse() here, res.json() handles it\n      .then(data => {\n        console.log(\"Buses for RouteID \".concat(id, \":\"), data); // Log each response\n        buses.push(...data); // Store the buses in the array\n      }).catch(err => console.log('Error fetching buses:', err)))).then(() => {\n        if (buses.length > 0) {\n          this.setState({\n            Buses: buses\n          });\n          console.log(\"All fetched buses:\", buses); // Log the final list of buses\n        } else {\n          console.log(\"No buses found for any route.\");\n        }\n      }).catch(err => console.error('Error during bus fetching:', err));\n    }\n  }\n  render() {\n    if (this.props.sbus === true) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, this.LoadBuses());\n    } else {\n      return React.createElement(\"div\", {\n        className: \"bg-light-yellow dib br3 pa3 ma2 grow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Bus Info Placeholder\"));\n    }\n  }\n}\nexport default Card;","map":{"version":3,"names":["React","Component","Card","constructor","props","handleBooking","event","selectedBusIndex","target","name","console","log","setState","bookedbus","state","Buses","SetBus","onRouteChange","LoadBuses","length","createElement","__source","fileName","_jsxFileName","lineNumber","__self","map","bus","index","key","className","style","width","margin","marginBottom","AgencyName","AC","src","concat","alt","height","StartTime","TravelTime","TotalSeats","ReservedSeats","componentDidMount","sbus","buses","routeIds","routeids","Promise","all","id","fetch","then","res","json","data","push","catch","err","error","render"],"sources":["C:/Users/golla/OneDrive/Desktop/bhan/Voice-based-Transport-Enquiry-System/voiceenquirysystem/src/Components/MainComponents/Card/Card.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport './Card.css';\r\n\r\nclass Card extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      Buses: [],        // Array to store the buses\r\n      bookedbus: -1     // Track the selected bus for booking\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n\tif (this.props.sbus === true) {\r\n\t  const buses = [];\r\n\t  const routeIds = this.props.routeids;\r\n  \r\n\t  if (routeIds.length === 0) {\r\n\t\tconsole.log(\"No route IDs provided\");\r\n\t\treturn;\r\n\t  }\r\n  \r\n\t  // Fetch buses for each RouteId\r\n\t  Promise.all(\r\n\t\trouteIds.map(id =>\r\n\t\t  fetch(`http://localhost:3001/fetchBuses/${id}`)\r\n\t\t\t.then(res => res.json())  // No need for JSON.parse() here, res.json() handles it\r\n\t\t\t.then(data => {\r\n\t\t\t  console.log(`Buses for RouteID ${id}:`, data);  // Log each response\r\n\t\t\t  buses.push(...data);  // Store the buses in the array\r\n\t\t\t})\r\n\t\t\t.catch(err => console.log('Error fetching buses:', err))\r\n\t\t)\r\n\t  )\r\n\t  .then(() => {\r\n\t\tif (buses.length > 0) {\r\n\t\t  this.setState({ Buses: buses });\r\n\t\t  console.log(\"All fetched buses:\", buses);  // Log the final list of buses\r\n\t\t} else {\r\n\t\t  console.log(\"No buses found for any route.\");\r\n\t\t}\r\n\t  })\r\n\t  .catch(err => console.error('Error during bus fetching:', err));\r\n\t}\r\n  }\r\n  \r\n\r\n  handleBooking = (event) => {\r\n    const selectedBusIndex = event.target.name;\r\n    console.log('Selected bus index:', selectedBusIndex);\r\n\r\n    this.setState({ bookedbus: selectedBusIndex }, () => {\r\n      console.log('Selected bus:', this.state.Buses[this.state.bookedbus]);\r\n\r\n      // Set the selected bus in the parent state and navigate to the next route\r\n      this.props.SetBus(this.state.Buses[this.state.bookedbus]);\r\n      this.props.onRouteChange('test');  // Navigate to the next page (test route)\r\n    });\r\n  }\r\n\r\n  LoadBuses = () => {\r\n\tif (this.state.Buses.length === 0) {\r\n\t  console.log('No buses available to display.');\r\n\t  return <p>No buses found</p>;\r\n\t}\r\n  \r\n\treturn this.state.Buses.map((bus, index) => (\r\n\t  <div key={index} className=\"bg-light-yellow br3 pa3 ma2 br2\" style={{ width: \"550px\", margin: \"0 auto\", marginBottom: \"20px\" }}>\r\n\t\t<div>\r\n\t\t  <div className=\"clearfix row-one\">\r\n\t\t\t<div className=\"column-two p-right-10 w-30 fl\">\r\n\t\t\t  <div className=\"travels lh-24 f-bold d-color\">{bus.AgencyName}</div>\r\n\t\t\t  <div className=\"bus-type f-15 m-top-16 l-color\">{bus.AC === 0 ? \"Non-AC\" : \"AC\"}</div>\r\n\t\t\t  <img src={`https://robohash.org/${index}?200x200`} alt=\"bus\" style={{ width: \"50px\", height: \"50px\" }} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"column-three p-right-10 w-10 fl\">\r\n\t\t\t  <div className=\"dp-time f-15 d-color f-bold\">{bus.StartTime}</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"column-four p-right-10 w-20 fl\">\r\n\t\t\t  <div className=\"dur l-color lh-12\">{bus.TravelTime} hrs.</div>\r\n\t\t\t  <div className=\"bus-type f-15 m-top-16 d-color\">Travel Time</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"column-eight w-15 fl\">\r\n\t\t\t  <div className=\"seat-left m-top-16\">{bus.TotalSeats - bus.ReservedSeats} <span className=\"l-color\"> Seats available</span></div>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n\t\t</div>\r\n\t  </div>\r\n\t));\r\n  }\r\n  \r\n  render() {\r\n    if (this.props.sbus === true) {\r\n      return (\r\n        <div>{this.LoadBuses()}</div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"bg-light-yellow dib br3 pa3 ma2 grow\">\r\n          <h4>Bus Info Placeholder</h4>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Card;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}